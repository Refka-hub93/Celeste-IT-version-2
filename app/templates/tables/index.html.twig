{% extends 'base.html.twig' %}

{% block title %}Mes Tableaux{% endblock %}

{% block body %}
<div class="container py-5">
    <h1 class="text-center text-primary mb-5"> Mes Tableaux</h1>


    {% if tableaux is empty %}
        <div class="alert alert-info text-center">
            Aucun tableau pour l'instant.
        </div>
    {% else %}
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
            {% for tableau in tableaux %}
                <div class="col">
                    <div class="card h-100 shadow border-0 " id="dashborard-card"
                         style="transition: transform 0.3s ease;"
                         onmouseover="this.style.transform='scale(1.02)'"
                         onmouseout="this.style.transform='scale(1)'">
                        <div class="card-body d-flex flex-column justify-content-between">
                            <div class="d-flex align-items-center mb-3">
                                <i class="bi bi-kanban-fill me-2 fs-3"></i>
                                <h5 class="card-title mb-0 fw-bold">{{ tableau.title }}</h5>
                            </div>
                            <a href="{{ path('app_tables_show', {'id': tableau.id}) }}" class="btn btn-primary text-light mt-auto w-100">
                                🡒 Ouvrir le tableau
                            </a>
 {# ▶︎ Nouveau bouton “supprimer” #}
  <form method="post"
        action="{{ path('app_tables_delete', {'id': tableau.id}) }}"
        onsubmit="return confirm('Supprimer définitivement le tableau « {{ tableau.title }} » ?');">
    <input type="hidden" name="_token"
           value="{{ csrf_token('delete_table_' ~ tableau.id) }}">
    <button class="btn btn-outline-danger w-100">
      🗑 Supprimer
    </button>
  </form>
                            
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}
